<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predicciones F1</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body class="bg-dark text-light">
    <nav class="navbar navbar-dark bg-danger mb-4">
        <div class="container">
            <span class="navbar-brand mb-0 h1">Predicciones Fórmula 1</span>
        </div>
    </nav>

    <div class="container">
        <!-- Nueva sección de predicción Emilia Romagna 2025 -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card bg-dark border-danger">
                    <div class="card-header bg-danger text-white">
                        <h4 class="mb-0">Predicción GP de Emilia-Romagna 2025 - Carlos Sainz</h4>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-dark table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>Año</th>
                                        <th>Circuito</th>
                                        <th>Puntos RF</th>
                                        <th>Puntos SVC</th>
                                        <th>Puntos KNN</th>
                                        <th>Posición RF</th>
                                        <th>Posición SVC</th>
                                        <th>Posición KNN</th>
                                        <th>Prob. Podio RF</th>
                                        <th>Prob. Podio SVC</th>
                                        <th>Prob. Podio KNN</th>
                                        <th>Mejor Histórico</th>
                                        <th>Peor Histórico</th>
                                        <th>Vueltas Promedio</th>
                                        <th>Temperatura</th>
                                        <th>Humedad</th>
                                        <th>Viento</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="table-success">
                                        <td>{{ prediccion_emilia_romagna_2025_sainz.Año }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_sainz.Circuito }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_sainz['Puntos Esperados RF'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_sainz['Puntos Esperados SVC'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_sainz['Puntos Esperados KNN'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_sainz['Posición Esperada RF'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_sainz['Posición Esperada SVC'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_sainz['Posición Esperada KNN'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_sainz['Probabilidad de Podio RF'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_sainz['Probabilidad de Podio SVC'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_sainz['Probabilidad de Podio KNN'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_sainz['Mejor Resultado Histórico'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_sainz['Peor Resultado Histórico'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_sainz['Promedio de Vueltas'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_sainz['Temperatura Promedio'] }}°C</td>
                                        <td>{{ prediccion_emilia_romagna_2025_sainz['Humedad Promedio'] }}%</td>
                                        <td>{{ prediccion_emilia_romagna_2025_sainz['Velocidad Viento Promedio'] }} km/h</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Predicción emilia Romagna 2025 - Alexander Albon -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card bg-dark border-primary">
                    <div class="card-header bg-primary text-white">
                        <h4 class="mb-0">Predicción GP de Emilia-Romagna 2025 - Alexander Albon</h4>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-dark table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>Año</th>
                                        <th>Circuito</th>
                                        <th>Puntos RF</th>
                                        <th>Puntos SVC</th>
                                        <th>Puntos KNN</th>
                                        <th>Posición RF</th>
                                        <th>Posición SVC</th>
                                        <th>Posición KNN</th>
                                        <th>Prob. Podio RF</th>
                                        <th>Prob. Podio SVC</th>
                                        <th>Prob. Podio KNN</th>
                                        <th>Mejor Histórico</th>
                                        <th>Peor Histórico</th>
                                        <th>Vueltas Promedio</th>
                                        <th>Temperatura</th>
                                        <th>Humedad</th>
                                        <th>Viento</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>{{ prediccion_emilia_romagna_2025_albon['Año'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_albon['Circuito'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_albon['Puntos Esperados RF'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_albon['Puntos Esperados SVC'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_albon['Puntos Esperados KNN'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_albon['Posición Esperada RF'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_albon['Posición Esperada SVC'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_albon['Posición Esperada KNN'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_albon['Probabilidad de Podio RF'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_albon['Probabilidad de Podio SVC'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_albon['Probabilidad de Podio KNN'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_albon['Mejor Resultado Histórico'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_albon['Peor Resultado Histórico'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_albon['Promedio de Vueltas'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_albon['Temperatura Promedio'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_albon['Humedad Promedio'] }}</td>
                                        <td>{{ prediccion_emilia_romagna_2025_albon['Velocidad Viento Promedio'] }}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Predicciones de puntos para Williams en Emilia Romagna GP 2025</h5>
                    </div>
                    <div class="card-body">
                        <div id="grafico_predicciones_williams" style="width: 100%; height: 400px;"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-md-6">
                <div class="card bg-dark border-danger">
                    <div class="card-body">
                        <div id="grafico-sainz"></div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card bg-dark border-danger">
                    <div class="card-body">
                        <div id="grafico-albon"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-12">
                <div class="card bg-dark border-danger">
                    <div class="card-body">
                        <div id="grafico-williams"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mb-4">
            <div class="col-md-6">
                <div class="card bg-dark text-white">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Métricas de Carlos Sainz</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-dark table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>Año</th>
                                        <th>Puntos Promedio</th>
                                        <th>Exactitud</th>
                                        <th>Precisión</th>
                                        <th>Recuperación</th>
                                        <th>Puntuación</th>
                                        <th>Qualifying Promedio</th>
                                        <th>Mejor Qualifying</th>
                                        <th>Peor Qualifying</th>
                                        <th>Rendimiento Qualifying</th>
                                        <th>Vueltas Promedio</th>
                                        <th>Edad Promedio</th>
                                        <th>Victorias Piloto</th>
                                        <th>Victorias Constructor</th>
                                        <th>Curvas Promedio</th>
                                        <th>Clima</th>
                                        <th>Temperatura</th>
                                        <th>Humedad</th>
                                        <th>Viento</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for pred in predicciones_sainz %}
                                    <tr>
                                        <td>{{ pred.Año }}</td>
                                        <td>{{ pred['Puntos Promedio'] }}</td>
                                        <td>{{ pred.Exactitud }}</td>
                                        <td>{{ pred.Precisión }}</td>
                                        <td>{{ pred.Recuperación }}</td>
                                        <td>{{ pred.Puntuación }}</td>
                                        <td>{{ pred['Qualifying Promedio'] }}</td>
                                        <td>{{ pred['Mejor Qualifying'] }}</td>
                                        <td>{{ pred['Peor Qualifying'] }}</td>
                                        <td>{{ pred['Rendimiento Qualifying'] }}</td>
                                        <td>{{ pred['Vueltas Promedio'] }}</td>
                                        <td>{{ pred['Edad Promedio'] }}</td>
                                        <td>{{ pred['Victorias Piloto'] }}</td>
                                        <td>{{ pred['Victorias Constructor'] }}</td>
                                        <td>{{ pred['Curvas Promedio'] }}</td>
                                        <td>{{ pred['Clima Predominante'] }}</td>
                                        <td>{{ pred['Temperatura Promedio'] }}°C</td>
                                        <td>{{ pred['Humedad Promedio'] }}%</td>
                                        <td>{{ pred['Velocidad Viento Promedio'] }} km/h</td>
                                    </tr>
                                    {% endfor %}
                                    <tr class="table-success">
                                        <td>{{ prediccion_proximo_anio_sainz.Año }}</td>
                                        <td>{{ prediccion_proximo_anio_sainz['Puntos Promedio'] }}</td>
                                        <td>{{ prediccion_proximo_anio_sainz.Exactitud }}</td>
                                        <td>{{ prediccion_proximo_anio_sainz.Precisión }}</td>
                                        <td>{{ prediccion_proximo_anio_sainz.Recuperación }}</td>
                                        <td>{{ prediccion_proximo_anio_sainz.Puntuación }}</td>
                                        <td>{{ prediccion_proximo_anio_sainz['Qualifying Promedio'] }}</td>
                                        <td>{{ prediccion_proximo_anio_sainz['Mejor Qualifying'] }}</td>
                                        <td>{{ prediccion_proximo_anio_sainz['Peor Qualifying'] }}</td>
                                        <td>{{ prediccion_proximo_anio_sainz['Rendimiento Qualifying'] }}</td>
                                        <td>{{ prediccion_proximo_anio_sainz['Vueltas Promedio'] }}</td>
                                        <td>{{ prediccion_proximo_anio_sainz['Edad Promedio'] }}</td>
                                        <td>{{ prediccion_proximo_anio_sainz['Victorias Piloto'] }}</td>
                                        <td>{{ prediccion_proximo_anio_sainz['Victorias Constructor'] }}</td>
                                        <td>{{ prediccion_proximo_anio_sainz['Curvas Promedio'] }}</td>
                                        <td>{{ prediccion_proximo_anio_sainz['Clima Predominante'] }}</td>
                                        <td>{{ prediccion_proximo_anio_sainz['Temperatura Promedio'] }}°C</td>
                                        <td>{{ prediccion_proximo_anio_sainz['Humedad Promedio'] }}%</td>
                                        <td>{{ prediccion_proximo_anio_sainz['Velocidad Viento Promedio'] }} km/h</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card bg-dark text-white">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Métricas de Alexander Albon</h5>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-dark table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>Año</th>
                                        <th>Puntos Promedio</th>
                                        <th>Exactitud</th>
                                        <th>Precisión</th>
                                        <th>Recuperación</th>
                                        <th>Puntuación</th>
                                        <th>Qualifying Promedio</th>
                                        <th>Mejor Qualifying</th>
                                        <th>Peor Qualifying</th>
                                        <th>Rendimiento Qualifying</th>
                                        <th>Vueltas Promedio</th>
                                        <th>Edad Promedio</th>
                                        <th>Victorias Piloto</th>
                                        <th>Victorias Constructor</th>
                                        <th>Curvas Promedio</th>
                                        <th>Clima</th>
                                        <th>Temperatura</th>
                                        <th>Humedad</th>
                                        <th>Viento</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for pred in predicciones_albon %}
                                    <tr>
                                        <td>{{ pred.Año }}</td>
                                        <td>{{ pred['Puntos Promedio'] }}</td>
                                        <td>{{ pred.Exactitud }}</td>
                                        <td>{{ pred.Precisión }}</td>
                                        <td>{{ pred.Recuperación }}</td>
                                        <td>{{ pred.Puntuación }}</td>
                                        <td>{{ pred['Qualifying Promedio'] }}</td>
                                        <td>{{ pred['Mejor Qualifying'] }}</td>
                                        <td>{{ pred['Peor Qualifying'] }}</td>
                                        <td>{{ pred['Rendimiento Qualifying'] }}</td>
                                        <td>{{ pred['Vueltas Promedio'] }}</td>
                                        <td>{{ pred['Edad Promedio'] }}</td>
                                        <td>{{ pred['Victorias Piloto'] }}</td>
                                        <td>{{ pred['Victorias Constructor'] }}</td>
                                        <td>{{ pred['Curvas Promedio'] }}</td>
                                        <td>{{ pred['Clima Predominante'] }}</td>
                                        <td>{{ pred['Temperatura Promedio'] }}°C</td>
                                        <td>{{ pred['Humedad Promedio'] }}%</td>
                                        <td>{{ pred['Velocidad Viento Promedio'] }} km/h</td>
                                    </tr>
                                    {% endfor %}
                                    <tr class="table-success">
                                        <td>{{ prediccion_proximo_anio_albon.Año }}</td>
                                        <td>{{ prediccion_proximo_anio_albon['Puntos Promedio'] }}</td>
                                        <td>{{ prediccion_proximo_anio_albon.Exactitud }}</td>
                                        <td>{{ prediccion_proximo_anio_albon.Precisión }}</td>
                                        <td>{{ prediccion_proximo_anio_albon.Recuperación }}</td>
                                        <td>{{ prediccion_proximo_anio_albon.Puntuación }}</td>
                                        <td>{{ prediccion_proximo_anio_albon['Qualifying Promedio'] }}</td>
                                        <td>{{ prediccion_proximo_anio_albon['Mejor Qualifying'] }}</td>
                                        <td>{{ prediccion_proximo_anio_albon['Peor Qualifying'] }}</td>
                                        <td>{{ prediccion_proximo_anio_albon['Rendimiento Qualifying'] }}</td>
                                        <td>{{ prediccion_proximo_anio_albon['Vueltas Promedio'] }}</td>
                                        <td>{{ prediccion_proximo_anio_albon['Edad Promedio'] }}</td>
                                        <td>{{ prediccion_proximo_anio_albon['Victorias Piloto'] }}</td>
                                        <td>{{ prediccion_proximo_anio_albon['Victorias Constructor'] }}</td>
                                        <td>{{ prediccion_proximo_anio_albon['Curvas Promedio'] }}</td>
                                        <td>{{ prediccion_proximo_anio_albon['Clima Predominante'] }}</td>
                                        <td>{{ prediccion_proximo_anio_albon['Temperatura Promedio'] }}°C</td>
                                        <td>{{ prediccion_proximo_anio_albon['Humedad Promedio'] }}%</td>
                                        <td>{{ prediccion_proximo_anio_albon['Velocidad Viento Promedio'] }} km/h</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h3>Outliers en Lap Times</h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div id="grafico-outliers-lap-times-sainz"></div>
                            </div>
                            <div class="col-md-6">
                                <div id="grafico-outliers-lap-times-albon"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    <script>
        var graficoSainz = {{ grafico_sainz | safe }};
        var graficoAlbon = {{ grafico_albon | safe }};
        var graficoWilliams = {{ grafico_williams | safe }};
        
        Plotly.newPlot('grafico-sainz', graficoSainz.data, graficoSainz.layout);
        Plotly.newPlot('grafico-albon', graficoAlbon.data, graficoAlbon.layout);
        Plotly.newPlot('grafico-williams', graficoWilliams.data, graficoWilliams.layout);

        var grafico_predicciones_williams = {{ grafico_predicciones_williams | safe }};
        Plotly.newPlot('grafico_predicciones_williams', grafico_predicciones_williams.data, grafico_predicciones_williams.layout);

        var graficoOutliersLapTimesSainz = JSON.parse('{{ grafico_outliers_lap_times_sainz | safe }}');
        var graficoOutliersLapTimesAlbon = JSON.parse('{{ grafico_outliers_lap_times_albon | safe }}');
        var graficoOutliersPitStopsSainz = JSON.parse('{{ grafico_outliers_pit_stops_sainz | safe }}');
        var graficoOutliersPitStopsAlbon = JSON.parse('{{ grafico_outliers_pit_stops_albon | safe }}');

        Plotly.newPlot('grafico-outliers-lap-times-sainz', graficoOutliersLapTimesSainz.data, graficoOutliersLapTimesSainz.layout);
        Plotly.newPlot('grafico-outliers-lap-times-albon', graficoOutliersLapTimesAlbon.data, graficoOutliersLapTimesAlbon.layout);
        Plotly.newPlot('grafico-outliers-pit-stops-sainz', graficoOutliersPitStopsSainz.data, graficoOutliersPitStopsSainz.layout);
        Plotly.newPlot('grafico-outliers-pit-stops-albon', graficoOutliersPitStopsAlbon.data, graficoOutliersPitStopsAlbon.layout);

    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html> 